<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<title>Objective 4 - Use Express Routers to Organize Web API Code</title>
<meta name="identifier" content="gfc6176e503426d28d550d710dbd7d713"/>
<meta name="editing_roles" content="teachers"/>
<meta name="workflow_state" content="active"/>
</head>
<body>
<p>&nbsp;</p>
<p><iframe class="wistia_embed" title="Express Router Video" src="https://fast.wistia.net/embed/iframe/dy8yg7v330" width="640" height="360" name="wistia_embed" allow="autoplay; fullscreen" loading="lazy"></iframe></p>
<p>&nbsp;</p>
<h2 id="overview">Overview</h2>
<p>An Express <code>Router</code> behaves like a mini Express application. It can have its own <code>Routing</code> and <code>Middleware</code>, but it needs to exist inside an Express application. Think of routers as a way of organizing Express applicationsâ€“you write separate pieces that can later be <em>composed</em> together.</p>
<p>This should all become clear with an example.</p>
<p>We'll start with our main server file.</p>
<pre style="background-image: none; background-attachment: scroll; background-color: #ffffff; border: 1px solid #c7cdd1; clear: none; color: #24292e; cursor: auto; direction: ltr; font-style: normal; font-stretch: normal; font-size: 12px; line-height: 14.4px; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; margin: 0px 0px 12px; padding: 9px; text-align: start; text-decoration: none; text-indent: 0px; white-space: pre-wrap; border-collapse: separate; border-spacing: 0px; background-position: 0% 0%; background-repeat: repeat repeat;" data-hljs-language="javascript"><code style="background-image: none; background-attachment: scroll; background-color: rgba(0, 0, 0, 0); border: 0px none #24292e; font-style: normal; font-stretch: normal; font-size: 16px; line-height: 19.200001px; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; margin: 0px; padding: 0px; background-position: 0% 0%; background-repeat: repeat repeat;"><span style="border: 0px none #d73a49; color: #d73a49;">const</span> express = <span style="border: 0px none #e36209; color: #e36209;">require</span>(<span style="border: 0px none #032f62; color: #032f62;">'express'</span>);<br><br><span style="border: 0px none #d73a49; color: #d73a49;">const</span> server = <span style="border: 0px none #6f42c1; color: #6f42c1;">express</span>();<br><br>server.<span style="border: 0px none #6f42c1; color: #6f42c1;">use</span>(<span style="border: 0px none #032f62; color: #032f62;">'/'</span>, <span>(<span>req, res</span>) =&gt;</span> res.<span style="border: 0px none #6f42c1; color: #6f42c1;">send</span>(<span style="border: 0px none #032f62; color: #032f62;">'API up and running!'</span>));<br><br>server.<span style="border: 0px none #6f42c1; color: #6f42c1;">listen</span>(<span style="border: 0px none #005cc5; color: #005cc5;">8000</span>, <span>() =&gt;</span> <span style="border: 0px none #d73a49; color: #d73a49;">console</span>.<span style="border: 0px none #6f42c1; color: #6f42c1;">log</span>(<span style="border: 0px none #032f62; color: #032f62;">'API running on port 8000'</span>));</code></pre>
<p><span>If our applications only included the above code, we wouldn't need routers. But imagine that this application needs endpoints to see a list of users, get details for a single user, add users, modify existing users, and inactivate users. That is at least five endpoints for the user's resource alone.</span></p>
<p><span>Now imagine this application also needs to deal with products, orders, returns, categories, providers, warehouses, clients, employees, and more. Even if we only have five endpoints per resource, each endpoint will have many lines of code, and you can see how trying to cram all that code in a single file could get unwieldy fast.</span></p>
<p>Let's rewrite it to separate the main server file from the file handling the routes for users.</p>
<p>Create a file to handle all routes related to the user resource.</p>
<pre style="background-image: none; background-attachment: scroll; background-color: #ffffff; border: 1px solid #c7cdd1; clear: none; color: #24292e; cursor: auto; direction: ltr; font-style: normal; font-stretch: normal; font-size: 12px; line-height: 14.4px; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; margin: 0px 0px 12px; padding: 9px; text-align: start; text-decoration: none; text-indent: 0px; white-space: pre-wrap; border-collapse: separate; border-spacing: 0px; background-position: 0% 0%; background-repeat: repeat repeat;" data-hljs-language="javascript"><code style="background-image: none; background-attachment: scroll; background-color: rgba(0, 0, 0, 0); border: 0px none #24292e; font-style: normal; font-stretch: normal; font-size: 16px; line-height: 19.200001px; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; margin: 0px; padding: 0px; background-position: 0% 0%; background-repeat: repeat repeat;"><span style="border: 0px none #6a737d; color: #6a737d;">// inside /users/userRoutes.js &lt;- this can be place anywhere and called anything</span><br><span style="border: 0px none #d73a49; color: #d73a49;">const</span> express = <span style="border: 0px none #e36209; color: #e36209;">require</span>(<span style="border: 0px none #032f62; color: #032f62;">'express'</span>);<br><br><span style="border: 0px none #d73a49; color: #d73a49;">const</span> router = express.<span style="border: 0px none #6f42c1; color: #6f42c1;">Router</span>(); <span style="border: 0px none #6a737d; color: #6a737d;">// notice the Uppercase R</span><br><br><span style="border: 0px none #6a737d; color: #6a737d;">// this file will only be used when the route begins with "/users"</span><br><span style="border: 0px none #6a737d; color: #6a737d;">// so we can remove that from the URLs, so "/users" becomes simply "/"</span><br>router.<span style="border: 0px none #6f42c1; color: #6f42c1;">get</span>(<span style="border: 0px none #032f62; color: #032f62;">'/'</span>, <span>(<span>req, res</span>) =&gt;</span> {<br>&nbsp;&nbsp;res.<span style="border: 0px none #6f42c1; color: #6f42c1;">status</span>(<span style="border: 0px none #005cc5; color: #005cc5;">200</span>).<span style="border: 0px none #6f42c1; color: #6f42c1;">send</span>(<span style="border: 0px none #032f62; color: #032f62;">'hello from the GET /users endpoint'</span>);<br>});<br><br>router.<span style="border: 0px none #6f42c1; color: #6f42c1;">get</span>(<span style="border: 0px none #032f62; color: #032f62;">'/:id'</span>, <span>(<span>req, res</span>) =&gt;</span> {<br>&nbsp;&nbsp;res.<span style="border: 0px none #6f42c1; color: #6f42c1;">status</span>(<span style="border: 0px none #005cc5; color: #005cc5;">200</span>).<span style="border: 0px none #6f42c1; color: #6f42c1;">send</span>(<span style="border: 0px none #032f62; color: #032f62;">'hello from the GET /users/:id endpoint'</span>);<br>});<br><br>router.<span style="border: 0px none #6f42c1; color: #6f42c1;">post</span>(<span style="border: 0px none #032f62; color: #032f62;">'/'</span>, <span>(<span>req, res</span>) =&gt;</span> {<br>&nbsp;&nbsp;res.<span style="border: 0px none #6f42c1; color: #6f42c1;">status</span>(<span style="border: 0px none #005cc5; color: #005cc5;">200</span>).<span style="border: 0px none #6f42c1; color: #6f42c1;">send</span>(<span style="border: 0px none #032f62; color: #032f62;">'hello from the POST /users endpoint'</span>);<br>});<br><br><span style="border: 0px none #6a737d; color: #6a737d;">// ... and any other endpoint related to the user's resource</span><br><br><span style="border: 0px none #6a737d; color: #6a737d;">// after the route has been fully configured, we then export it to be required where needed</span><br><span style="border: 0px none #d73a49; color: #d73a49;">module</span>.<span>exports</span> = router; <span style="border: 0px none #6a737d; color: #6a737d;">// standard convention dictates that this is the last line on the file</span></code></pre>
<p><span>Even if the user resource needs 8 or 10 endpoints, they are packaged neatly into this file.</span></p>
<p><span>How can we use it in our main file? Like so:</span></p>
<pre style="background-image: none; background-attachment: scroll; background-color: #ffffff; border: 1px solid #c7cdd1; clear: none; color: #24292e; cursor: auto; direction: ltr; font-style: normal; font-stretch: normal; font-size: 12px; line-height: 14.4px; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; margin: 0px 0px 12px; padding: 9px; text-align: start; text-decoration: none; text-indent: 0px; white-space: pre-wrap; border-collapse: separate; border-spacing: 0px; background-position: 0% 0%; background-repeat: repeat repeat;" data-hljs-language="javascript"><code style="background-image: none; background-attachment: scroll; background-color: rgba(0, 0, 0, 0); border: 0px none #24292e; font-style: normal; font-stretch: normal; font-size: 16px; line-height: 19.200001px; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; margin: 0px; padding: 0px; background-position: 0% 0%; background-repeat: repeat repeat;"><span style="border: 0px none #d73a49; color: #d73a49;">const</span> express = <span style="border: 0px none #e36209; color: #e36209;">require</span>(<span style="border: 0px none #032f62; color: #032f62;">'express'</span>);<br><br><span style="border: 0px none #d73a49; color: #d73a49;">const</span> userRoutes = <span style="border: 0px none #e36209; color: #e36209;">require</span>(<span style="border: 0px none #032f62; color: #032f62;">'./users/userRoutes'</span>);<br><span style="border: 0px none #d73a49; color: #d73a49;">const</span> productRoutes = <span style="border: 0px none #e36209; color: #e36209;">require</span>(<span style="border: 0px none #032f62; color: #032f62;">'./products/productRoutes'</span>);<br><span style="border: 0px none #d73a49; color: #d73a49;">const</span> clientRoutes = <span style="border: 0px none #e36209; color: #e36209;">require</span>(<span style="border: 0px none #032f62; color: #032f62;">'./clients/clientRoutes'</span>);<br><br><span style="border: 0px none #d73a49; color: #d73a49;">const</span> server = <span style="border: 0px none #6f42c1; color: #6f42c1;">express</span>();<br><br>server.<span style="border: 0px none #6f42c1; color: #6f42c1;">use</span>(<span style="border: 0px none #032f62; color: #032f62;">'/users'</span>, userRoutes);<br>server.<span style="border: 0px none #6f42c1; color: #6f42c1;">use</span>(<span style="border: 0px none #032f62; color: #032f62;">'/products'</span>, productRoutes);<br>server.<span style="border: 0px none #6f42c1; color: #6f42c1;">use</span>(<span style="border: 0px none #032f62; color: #032f62;">'/clients'</span>, clientRoutes);<br><br>server.<span style="border: 0px none #6f42c1; color: #6f42c1;">listen</span>(<span style="border: 0px none #005cc5; color: #005cc5;">8000</span>, <span>() =&gt;</span> <span style="border: 0px none #d73a49; color: #d73a49;">console</span>.<span style="border: 0px none #6f42c1; color: #6f42c1;">log</span>(<span style="border: 0px none #032f62; color: #032f62;">'API running on port 8000'</span>));</code></pre>
<p><span>Much cleaner, we added three sets of endpoints to our server, where each needs only two lines of easy-to-read code.</span></p>
<p><span>There is an alternative syntax for writing route handlers, but we'll leave that for you to explore.</span></p>
<p><span>Also, note that <strong>it is possible to have a central router representing our API and import the routes. </strong>This logic cleans up our main server file even more. Let's see a quick example of that.</span></p>
<pre style="background-image: none; background-attachment: scroll; background-color: #ffffff; border: 1px solid #c7cdd1; clear: none; color: #24292e; cursor: auto; direction: ltr; font-style: normal; font-stretch: normal; font-size: 12px; line-height: 14.4px; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; margin: 0px 0px 12px; padding: 9px; text-align: start; text-decoration: none; text-indent: 0px; white-space: pre-wrap; border-collapse: separate; border-spacing: 0px; background-position: 0% 0%; background-repeat: repeat repeat;" data-hljs-language="javascript"><code style="background-image: none; background-attachment: scroll; background-color: rgba(0, 0, 0, 0); border: 0px none #24292e; font-style: normal; font-stretch: normal; font-size: 16px; line-height: 19.200001px; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; margin: 0px; padding: 0px; background-position: 0% 0%; background-repeat: repeat repeat;"><span style="border: 0px none #d73a49; color: #d73a49;">const</span> express = <span style="border: 0px none #e36209; color: #e36209;">require</span>(<span style="border: 0px none #032f62; color: #032f62;">'express'</span>);<br><br><span style="border: 0px none #d73a49; color: #d73a49;">const</span> apiRoutes = <span style="border: 0px none #e36209; color: #e36209;">require</span>(<span style="border: 0px none #032f62; color: #032f62;">'./api/apiRoutes'</span>);<br><br><span style="border: 0px none #d73a49; color: #d73a49;">const</span> server = <span style="border: 0px none #6f42c1; color: #6f42c1;">express</span>();<br><br>server.<span style="border: 0px none #6f42c1; color: #6f42c1;">use</span>(<span style="border: 0px none #032f62; color: #032f62;">'/api'</span>, userRoutes);<br><br>server.<span style="border: 0px none #6f42c1; color: #6f42c1;">listen</span>(<span style="border: 0px none #005cc5; color: #005cc5;">8000</span>, <span>() =&gt;</span> <span style="border: 0px none #d73a49; color: #d73a49;">console</span>.<span style="border: 0px none #6f42c1; color: #6f42c1;">log</span>(<span style="border: 0px none #032f62; color: #032f62;">'API running on port 8000'</span>));</code></pre>
<p>And the <code>apiRoutes</code> could look like this:</p>
<pre style="background-image: none; background-attachment: scroll; background-color: #ffffff; border: 1px solid #c7cdd1; clear: none; color: #24292e; cursor: auto; direction: ltr; font-style: normal; font-stretch: normal; font-size: 12px; line-height: 14.4px; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; margin: 0px 0px 12px; padding: 9px; text-align: start; text-decoration: none; text-indent: 0px; white-space: pre-wrap; border-collapse: separate; border-spacing: 0px; background-position: 0% 0%; background-repeat: repeat repeat;" data-hljs-language="javascript"><code style="background-image: none; background-attachment: scroll; background-color: rgba(0, 0, 0, 0); border: 0px none #24292e; font-style: normal; font-stretch: normal; font-size: 16px; line-height: 19.200001px; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; margin: 0px; padding: 0px; background-position: 0% 0%; background-repeat: repeat repeat;"><span style="border: 0px none #6a737d; color: #6a737d;">// inside /api/apiRoutes.js &lt;- this can be place anywhere and called anything</span><br><span style="border: 0px none #d73a49; color: #d73a49;">const</span> express = <span style="border: 0px none #e36209; color: #e36209;">require</span>(<span style="border: 0px none #032f62; color: #032f62;">'express'</span>);<br><br><span style="border: 0px none #6a737d; color: #6a737d;">// if the other routers are not nested inside /api then the paths would change</span><br><span style="border: 0px none #d73a49; color: #d73a49;">const</span> userRoutes = <span style="border: 0px none #e36209; color: #e36209;">require</span>(<span style="border: 0px none #032f62; color: #032f62;">'./users/userRoutes'</span>);<br><span style="border: 0px none #d73a49; color: #d73a49;">const</span> productRoutes = <span style="border: 0px none #e36209; color: #e36209;">require</span>(<span style="border: 0px none #032f62; color: #032f62;">'./products/productRoutes'</span>);<br><span style="border: 0px none #d73a49; color: #d73a49;">const</span> clientRoutes = <span style="border: 0px none #e36209; color: #e36209;">require</span>(<span style="border: 0px none #032f62; color: #032f62;">'./clients/clientRoutes'</span>);<br><br><span style="border: 0px none #d73a49; color: #d73a49;">const</span> router = express.<span style="border: 0px none #6f42c1; color: #6f42c1;">Router</span>(); <span style="border: 0px none #6a737d; color: #6a737d;">// notice the Uppercase R</span><br><br><span style="border: 0px none #6a737d; color: #6a737d;">// this file will only be used when the route begins with "/api"</span><br><span style="border: 0px none #6a737d; color: #6a737d;">// so we can remove that from the URLs, so "/api/users" becomes simply "/users"</span><br>router.<span style="border: 0px none #6f42c1; color: #6f42c1;">use</span>(<span style="border: 0px none #032f62; color: #032f62;">'/users'</span>, userRoutes);<br>router.<span style="border: 0px none #6f42c1; color: #6f42c1;">use</span>(<span style="border: 0px none #032f62; color: #032f62;">'/products'</span>, productRoutes);<br>router.<span style="border: 0px none #6f42c1; color: #6f42c1;">use</span>(<span style="border: 0px none #032f62; color: #032f62;">'/clients'</span>, clientRoutes);<br><br><span style="border: 0px none #6a737d; color: #6a737d;">// .. and any other endpoint related to the user's resource</span><br><br><span style="border: 0px none #6a737d; color: #6a737d;">// after the route has been fully configured, we then export it so it can be required where needed</span><br><span style="border: 0px none #d73a49; color: #d73a49;">module</span>.<span>exports</span> = router; <span style="border: 0px none #6a737d; color: #6a737d;">// standard convention dictates that this is the last line on the file</span></code></pre>
<p>As you can see, routers can <em>use</em> other routers.</p>
<p>The <code>userRoutes</code>, <code>productRoutes</code>, and <code>clientRoutes</code> remain unchanged (other than relocating them inside the API folder).</p>
<p><span>In the next section, follow along as we practice using routers.</span></p>
<h2 id="follow-along">Follow Along</h2>
<p><span>Let's implement a simple API that returns strings but takes advantage of Express routers. Express routers are overkill for such a simple application. Still, in larger applications, there would be many benefits to taking this approach.</span></p>
<p><span>We'll build it from scratch. But, first, follow these steps to create the folder and main server file:</span></p>
<ul>
<li>create an empty folder for our Web API. Feel free to name it anything you'd like.</li>
<li><strong>CD into the folder</strong> you just created and type <code>npm init -y</code> to generate a default <code>package.json</code> file. The <code>-y</code> flag saves time by answering <code>yes</code> to all the questions that the <code>npm init</code> command would ask one at a time.</li>
<li>open the folder in your favorite text editor.</li>
<li>inside the <code>package.json</code> file, change <code>"test": "echo \"Error: no test specified\" &amp;&amp; exit 1"</code> inside the <code>scripts</code> object to read: <code>"start": "nodemon index.js"</code>. Changing the <code>scripts</code> object will let us run our server using <code>nodemon</code> by typing <code>npm start</code> at the command line/terminal. <strong>Make sure to save the file.</strong></li>
<li>we need to install <code>nodemon</code> as a development-time dependency only because it is not needed when deploying our server to production. Type <code>npm install -D nodemon</code> will add it to the <code>devDependencies</code> property in our <code>package.json</code> file.</li>
<li>create a file to host the server code. We'll call it <code>index.js</code>.</li>
<li>Add the basic code to create our Express server and have a default <code>/</code> endpoint to test that our server responds to requests.</li>
</ul>
<pre style="background-image: none; background-attachment: scroll; background-color: #ffffff; border: 1px solid #c7cdd1; clear: none; color: #24292e; cursor: auto; direction: ltr; font-style: normal; font-stretch: normal; font-size: 12px; line-height: 14.4px; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; margin: 0px 0px 12px; padding: 9px; text-align: start; text-decoration: none; text-indent: 0px; white-space: pre-wrap; border-collapse: separate; border-spacing: 0px; background-position: 0% 0%; background-repeat: repeat repeat;" data-hljs-language="javascript"><code style="background-image: none; background-attachment: scroll; background-color: rgba(0, 0, 0, 0); border: 0px none #24292e; font-style: normal; font-stretch: normal; font-size: 16px; line-height: 19.200001px; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; margin: 0px; padding: 0px; background-position: 0% 0%; background-repeat: repeat repeat;"><span style="border: 0px none #d73a49; color: #d73a49;">const</span> express = <span style="border: 0px none #e36209; color: #e36209;">require</span>(<span style="border: 0px none #032f62; color: #032f62;">'express'</span>);<br><br><span style="border: 0px none #d73a49; color: #d73a49;">const</span> server = <span style="border: 0px none #6f42c1; color: #6f42c1;">express</span>();<br><br>server.<span style="border: 0px none #6f42c1; color: #6f42c1;">use</span>(<span style="border: 0px none #032f62; color: #032f62;">'/'</span>, <span>(<span>req, res</span>) =&gt;</span> res.<span style="border: 0px none #6f42c1; color: #6f42c1;">send</span>(<span style="border: 0px none #032f62; color: #032f62;">'API up and running!'</span>));<br><br><span style="border: 0px none #6a737d; color: #6a737d;">// using port 9000 for this example</span><br>server.<span style="border: 0px none #6f42c1; color: #6f42c1;">listen</span>(<span style="border: 0px none #005cc5; color: #005cc5;">9000</span>, <span>() =&gt;</span> <span style="border: 0px none #d73a49; color: #d73a49;">console</span>.<span style="border: 0px none #6f42c1; color: #6f42c1;">log</span>(<span style="border: 0px none #032f62; color: #032f62;">'API running on port 9000'</span>));</code></pre>
<ul>
<li>add the <code>express</code> npm module: <code>npm install express</code>.</li>
<li>start the server by typing <code>npm start</code>.</li>
<li>test it by visiting: <a href="http://localhost:9000">http://localhost:9000</a>0 in your browser.</li>
</ul>
<p>Let's add our first router to manage the <code>races</code> resource.</p>
<ul>
<li>create a folder called <code>races</code> to host our router.</li>
<li>create a file called <code>raceRoutes.js</code> and add the following code:</li>
</ul>
<pre style="background-image: none; background-attachment: scroll; background-color: #ffffff; border: 1px solid #c7cdd1; clear: none; color: #24292e; cursor: auto; direction: ltr; font-style: normal; font-stretch: normal; font-size: 12px; line-height: 14.4px; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; margin: 0px 0px 12px; padding: 9px; text-align: start; text-decoration: none; text-indent: 0px; white-space: pre-wrap; border-collapse: separate; border-spacing: 0px; background-position: 0% 0%; background-repeat: repeat repeat;" data-hljs-language="javascript"><code style="background-image: none; background-attachment: scroll; background-color: rgba(0, 0, 0, 0); border: 0px none #24292e; font-style: normal; font-stretch: normal; font-size: 16px; line-height: 19.200001px; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; margin: 0px; padding: 0px; background-position: 0% 0%; background-repeat: repeat repeat;"><span style="border: 0px none #d73a49; color: #d73a49;">const</span> express = <span style="border: 0px none #e36209; color: #e36209;">require</span>(<span style="border: 0px none #032f62; color: #032f62;">'express'</span>);<br><br><span style="border: 0px none #d73a49; color: #d73a49;">const</span> router = express.<span style="border: 0px none #6f42c1; color: #6f42c1;">Router</span>();<br><br>router.<span style="border: 0px none #6f42c1; color: #6f42c1;">get</span>(<span style="border: 0px none #032f62; color: #032f62;">'/'</span>, <span>(<span>req, res</span>) =&gt;</span> {<br>&nbsp;&nbsp;<span style="border: 0px none #d73a49; color: #d73a49;">const</span> races = [<span style="border: 0px none #032f62; color: #032f62;">'human'</span>, <span style="border: 0px none #032f62; color: #032f62;">'elf'</span>, <span style="border: 0px none #032f62; color: #032f62;">'hobbit'</span>, <span style="border: 0px none #032f62; color: #032f62;">'wizard'</span>, <span style="border: 0px none #032f62; color: #032f62;">'dwarf'</span>, <span style="border: 0px none #032f62; color: #032f62;">'orc'</span>];<br><br>&nbsp;&nbsp;res.<span style="border: 0px none #6f42c1; color: #6f42c1;">status</span>(<span style="border: 0px none #005cc5; color: #005cc5;">200</span>).<span style="border: 0px none #6f42c1; color: #6f42c1;">json</span>(races);<br>});<br><br><span style="border: 0px none #d73a49; color: #d73a49;">module</span>.<span>exports</span> = router;</code></pre>
<p>Now open your <code>index.js</code> file and use the newly created router by following these steps.</p>
<ul>
<li>require the <code>raceRoutes.js</code> file after requiring Express.</li>
<li>use the race router to handle the <code>/races</code> endpoint.</li>
</ul>
<p>Our <code>index.js</code> file now looks like this:</p>
<pre style="background-image: none;  background-attachment: scroll;   background-color: #ffffff; border: 1px solid #c7cdd1; clear: none; color: #24292e; cursor: auto; direction: ltr; font-style: normal;   font-stretch: normal; font-size: 12px; line-height: 14.4px; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; margin: 0px 0px 12px; padding: 9px; text-align: start; text-decoration: none; text-indent: 0px; white-space: pre-wrap; border-collapse: separate; border-spacing: 0px;      background-position: 0% 0%; background-repeat: repeat repeat;" data-hljs-language="javascript"><code style="background-image: none;  background-attachment: scroll;   background-color: rgba(0, 0, 0, 0); border: 0px none #24292e; font-style: normal;   font-stretch: normal; font-size: 16px; line-height: 19.200001px; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; margin: 0px; padding: 0px; background-position: 0% 0%; background-repeat: repeat repeat;"><span style="border: 0px none #d73a49; color: #d73a49;">const</span> express = <span style="border: 0px none #e36209; color: #e36209;">require</span>(<span style="border: 0px none #032f62; color: #032f62;">'express'</span>);<br><br><span style="border: 0px none #d73a49; color: #d73a49;">const</span> raceRoutes = <span style="border: 0px none #e36209; color: #e36209;">require</span>(<span style="border: 0px none #032f62; color: #032f62;">'./races/raceRoutes'</span>);<br><br><span style="border: 0px none #d73a49; color: #d73a49;">const</span> server = <span style="border: 0px none #6f42c1; color: #6f42c1;">express</span>();<br><br>server.<span style="border: 0px none #6f42c1; color: #6f42c1;">use</span>(<span style="border: 0px none #032f62; color: #032f62;">'/races'</span>, raceRoutes);<br><br>server.<span style="border: 0px none #6f42c1; color: #6f42c1;">use</span>(<span style="border: 0px none #032f62; color: #032f62;">'/'</span>, <span>(<span>req, res</span>) =&gt;</span> res.<span style="border: 0px none #6f42c1; color: #6f42c1;">send</span>(<span style="border: 0px none #032f62; color: #032f62;">'API up and running!'</span>));<br><br>server.<span style="border: 0px none #6f42c1; color: #6f42c1;">listen</span>(<span style="border: 0px none #005cc5; color: #005cc5;">9000</span>, <span>() =&gt;</span> <span style="border: 0px none #d73a49; color: #d73a49;">console</span>.<span style="border: 0px none #6f42c1; color: #6f42c1;">log</span>(<span style="border: 0px none #032f62; color: #032f62;">'API running on port 9000'</span>));</code></pre>
<p>Visiting <a href="http://localhost:9000/races">http://localhost:9000/races</a>s should return our array of strings.</p>
<p><span>Great job! You are on your way to writing well-structured APIs that other team members (including your future self) will love using!</span></p>
<h2 id="challenge">Challenge</h2>
<p>Using your newly learned Express Router expertise, add a second Router to handle the <code>/villains</code> endpoint. Return a list of names of two or three villain characters you remember (even better if it's from the Lord of The Rings to be consistent).</p>
</body>
</html>